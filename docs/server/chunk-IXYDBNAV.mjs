import './polyfills.server.mjs';
import{b as L}from"./chunk-AWEYFN3Q.mjs";import{d as K,f as T}from"./chunk-SFPBSXV5.mjs";import{a as W}from"./chunk-UOI4TOWN.mjs";import{a as G}from"./chunk-TSGDKYZY.mjs";import{a as R,b as H,e as q,f as Z}from"./chunk-3I7DM6BJ.mjs";import{b as M,c as f,e as S,f as B,h as D,j as _,k as I,l as Q,m as z,n as w,o as j,q as k}from"./chunk-EAJQKMXB.mjs";import{$a as O,Fb as P,I as u,Ib as b,J as c,S as U,W as e,X as t,Y as r,ba as A,g as v,gb as N,h as m,j as y,ka as o,m as E,n as d}from"./chunk-LDBXBBTC.mjs";import"./chunk-5XUXGTUW.mjs";var g=class a extends G{cadastrarEtapaEndpoint="EtapaModel/cadastrar";constructor(i){super(i)}cadastrarEtapa(i){return this.post(`${this.cadastrarEtapaEndpoint}`,i)}static \u0275fac=function(n){return new(n||a)(y(N))};static \u0275prov=v({token:a,factory:a.\u0275fac,providedIn:"root"})};var C=class a{constructor(i,n,s,l,p){this.fb=i;this.obraService=n;this.etapasService=s;this.messageService=l;this.router=p}formGroup;etapasForm;idUsuario;mmensagem="";ngOnInit(){this.idUsuario=parseInt(localStorage.getItem("userId")||"0",10),console.log(this.idUsuario),this.configureForm()}configureForm(){this.formGroup=this.fb.group({nomeObra:[null,[f.required]],construtora:[null,[f.required]],localizacao:[null,[f.required]],prazoConclusao:[null]}),this.etapasForm=this.fb.group({nomeEtapa:[null,[f.required]],descricaoEtapa:[null,[f.required]],prazoConclusaoEtapa:[null]})}save(){let i=new Date,n;console.log("interno save button "+this.idUsuario);let s={idObra:0,nome:this.formGroup.controls.nomeObra.value,descricao:"",localizacao:this.formGroup.controls.localizacao.value,dataInicio:i,dataFim:this.formGroup.controls.prazoConclusao.value,construtora:this.formGroup.controls.construtora.value,estaConcluido:!1,idGestor:this.idUsuario,idUsuario:this.idUsuario,idUf:0};console.log("Nova obra model "+s.idUsuario),this.obraService.cadastrarObra(s).subscribe({next:l=>{let p=l.obraDto?.idObra;if(!p){console.error("Erro: idObra n\xE3o encontrado na resposta.");return}console.log("response.idObra antes: "+p);let X={nomeEtapa:this.etapasForm.get("nomeEtapa")?.value,descricao:this.etapasForm.get("descricaoEtapa")?.value,dataConclusao:this.etapasForm.get("dataConclusaoEtapa")?.value,idEtapa:0,idObra:p};console.log("response.idObra depois: "+p),this.etapasService.cadastrarEtapa(X).subscribe({next:h=>{this.messageService.add({severity:"success",summary:"cadasto de etapa bem-sucedido",detail:"Etapa cadastrada com sucesso!"}),console.log("Etapa cadastrada com sucesso:",h),this.router.navigate(["/obra-andamento"])},error:h=>{console.error("Erro ao cadastrar etapa:",h)}}),this.messageService.add({severity:"success",summary:"cadasto de obra bem-sucedido",detail:"Obra cadastrada!"}),console.log("Obra cadastrada:",l)},error:l=>{console.error("Erro ao cadastrar obra:",l)}})}static \u0275fac=function(n){return new(n||a)(c(z),c(W),c(g),c(k),c(P))};static \u0275cmp=E({type:a,selectors:[["app-cadastrar-nova-obra"]],decls:65,vars:3,consts:[[3,"formGroup"],[1,"titulo-principal"],[1,"negrito"],[1,"passo","passo-1"],[1,"form-container"],[1,"campo"],["for","nome-obra"],["type","text","id","nome-obra","placeholder","Nome da obra","required","","formControlName","nomeObra"],["for","construtora"],["type","text","id","construtora","placeholder","Construtora","required","","formControlName","construtora"],["for","localizacao"],["type","text","id","localizacao","placeholder","Localiza\xE7\xE3o (Cidade - Estado)","required","","formControlName","localizacao"],[1,"campo","prazo-conclusao"],["for","prazo-conclusao"],["type","date","id","prazo-etapa","formControlName","prazoConclusao"],[1,"passo","passo-2"],["for","nome-etapa"],["type","text","id","nome-etapa","placeholder","Nome da etapa","required","","formControlName","nomeEtapa"],["for","descricao-etapa"],["id","descricao-etapa","placeholder","Escreva sua mensagem aqui...","required","","formControlName","descricaoEtapa"],["type","date","id","prazo-etapa","formControlName","prazoConclusaoEtapa"],[1,"nova-etapa"],["href","#",1,"nova-etapa-link"],[1,"botoes-container"],[1,"btn-cadastrar",3,"click"],[1,"btn-cancelar"]],template:function(n,s){n&1&&(r(0,"app-navbar"),e(1,"div",0)(2,"header",1)(3,"h1"),o(4,"Siga o passo a passo para efetuar o "),e(5,"span",2),o(6,"cadastro"),t(),o(7," da sua "),e(8,"span",2),o(9,"obra com sucesso!"),t()()(),e(10,"section",3)(11,"h2"),o(12,"1\xBA Passo"),t(),r(13,"hr"),e(14,"div",4)(15,"h3"),o(16,"Sobre a obra:"),t(),e(17,"form",0)(18,"div",5)(19,"label",6),o(20,"Nome da obra"),t(),r(21,"input",7),t(),e(22,"div",5)(23,"label",8),o(24,"Construtora"),t(),r(25,"input",9),t(),e(26,"div",5)(27,"label",10),o(28,"Localiza\xE7\xE3o (Cidade - Estado)"),t(),r(29,"input",11),t(),e(30,"div",12)(31,"label",13),o(32,"Prazo de conclus\xE3o"),t(),r(33,"input",14),t()()()(),e(34,"section",15)(35,"h2"),o(36,"2\xBA Passo"),t(),r(37,"hr"),e(38,"div",4)(39,"h3"),o(40,"Etapas da obra:"),t(),e(41,"h4"),o(42,"Etapa 1"),t(),e(43,"form",0)(44,"div",5)(45,"label",16),o(46,"Nome da etapa"),t(),r(47,"input",17),t(),e(48,"div",5)(49,"label",18),o(50,"Descri\xE7\xE3o da etapa"),t(),r(51,"textarea",19),t(),e(52,"div",12)(53,"label",13),o(54,"Prazo de conclus\xE3o"),t(),r(55,"input",20),t()(),e(56,"div",21)(57,"a",22),o(58,"+ Nova Etapa"),t()()(),e(59,"div",23)(60,"button",24),A("click",function(){return s.save()}),o(61,"CADASTRAR"),t(),e(62,"button",25),o(63,"CANCELAR"),t()()()(),r(64,"app-footer")),n&2&&(u(),U("formGroup",s.formGroup),u(16),U("formGroup",s.formGroup),u(26),U("formGroup",s.etapasForm))},dependencies:[D,M,S,B,Q,_,I,R,H],styles:['@charset "UTF-8";@font-face{font-family:Oswald;font-style:normal;font-weight:200 700;font-display:swap;src:url(https://fonts.gstatic.com/s/oswald/v53/TK3iWkUHHAIjg752FD8Ghe4.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Oswald;font-style:normal;font-weight:200 700;font-display:swap;src:url(https://fonts.gstatic.com/s/oswald/v53/TK3iWkUHHAIjg752HT8Ghe4.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Oswald;font-style:normal;font-weight:200 700;font-display:swap;src:url(https://fonts.gstatic.com/s/oswald/v53/TK3iWkUHHAIjg752Fj8Ghe4.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Oswald;font-style:normal;font-weight:200 700;font-display:swap;src:url(https://fonts.gstatic.com/s/oswald/v53/TK3iWkUHHAIjg752Fz8Ghe4.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Oswald;font-style:normal;font-weight:200 700;font-display:swap;src:url(https://fonts.gstatic.com/s/oswald/v53/TK3iWkUHHAIjg752GT8G.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Noto Sans;font-style:italic;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notosans/v37/o-0ZIpQlx3QUlC5A4PNr4C5OaxRsfNNlKbCePevttHOmDyw.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Noto Sans;font-style:italic;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notosans/v37/o-0ZIpQlx3QUlC5A4PNr4C5OaxRsfNNlKbCePevtvXOmDyw.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Noto Sans;font-style:italic;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notosans/v37/o-0ZIpQlx3QUlC5A4PNr4C5OaxRsfNNlKbCePevtuHOmDyw.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Noto Sans;font-style:italic;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notosans/v37/o-0ZIpQlx3QUlC5A4PNr4C5OaxRsfNNlKbCePevttXOmDyw.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Noto Sans;font-style:italic;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notosans/v37/o-0ZIpQlx3QUlC5A4PNr4C5OaxRsfNNlKbCePevtunOmDyw.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Noto Sans;font-style:italic;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notosans/v37/o-0ZIpQlx3QUlC5A4PNr4C5OaxRsfNNlKbCePevttnOmDyw.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Noto Sans;font-style:italic;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notosans/v37/o-0ZIpQlx3QUlC5A4PNr4C5OaxRsfNNlKbCePevtt3OmDyw.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Noto Sans;font-style:italic;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notosans/v37/o-0ZIpQlx3QUlC5A4PNr4C5OaxRsfNNlKbCePevtuXOm.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Noto Sans;font-style:normal;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notosans/v37/o-0bIpQlx3QUlC5A4PNB6Ryti20_6n1iPHjc5aPdu2ui.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Noto Sans;font-style:normal;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notosans/v37/o-0bIpQlx3QUlC5A4PNB6Ryti20_6n1iPHjc5ardu2ui.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Noto Sans;font-style:normal;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notosans/v37/o-0bIpQlx3QUlC5A4PNB6Ryti20_6n1iPHjc5a_du2ui.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Noto Sans;font-style:normal;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notosans/v37/o-0bIpQlx3QUlC5A4PNB6Ryti20_6n1iPHjc5aLdu2ui.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Noto Sans;font-style:normal;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notosans/v37/o-0bIpQlx3QUlC5A4PNB6Ryti20_6n1iPHjc5a3du2ui.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Noto Sans;font-style:normal;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notosans/v37/o-0bIpQlx3QUlC5A4PNB6Ryti20_6n1iPHjc5aHdu2ui.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Noto Sans;font-style:normal;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notosans/v37/o-0bIpQlx3QUlC5A4PNB6Ryti20_6n1iPHjc5aDdu2ui.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Noto Sans;font-style:normal;font-weight:100 900;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/notosans/v37/o-0bIpQlx3QUlC5A4PNB6Ryti20_6n1iPHjc5a7duw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}.titulo-principal[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 auto;max-width:1200px;font-family:Oswald,sans-serif;font-size:36px;font-weight:400;color:#023059;padding:40px 0;text-align:center}.negrito[_ngcontent-%COMP%]{font-weight:700}.passo[_ngcontent-%COMP%]{padding-bottom:40px}h2[_ngcontent-%COMP%]{font-size:24px;color:#023059;text-align:center}h3[_ngcontent-%COMP%]{font-family:Oswald,sans-serif;font-size:20px;color:#fff;text-align:center;margin-bottom:20px}h4[_ngcontent-%COMP%]{font-size:20px;color:#f2b705;text-align:center}hr[_ngcontent-%COMP%]{border:1px solid #023059;max-width:600px;margin-top:0;margin-bottom:20px}.form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;background-color:#023059;padding:20px;border-radius:20px;box-shadow:0 4px 10px #0003}label[_ngcontent-%COMP%]{color:#d9a25f}.campo[_ngcontent-%COMP%]{margin-bottom:15px}input[type=text][_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:5px;border:1px solid white;background-color:#fff;color:#727272}input[type=text][_ngcontent-%COMP%]::placeholder, input[type=date][_ngcontent-%COMP%]::placeholder, textarea[_ngcontent-%COMP%]::placeholder{color:#727272}.prazo-conclusao[_ngcontent-%COMP%]{position:relative}.prazo-label[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;color:#727272;font-size:14px;transition:.2s;pointer-events:none}.hidden[_ngcontent-%COMP%]{opacity:0}.anexar-imagem[_ngcontent-%COMP%]{position:relative}.anexar-imagem[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.anexar-imagem[_ngcontent-%COMP%]   .clip-icon[_ngcontent-%COMP%]{position:absolute;right:15px;top:55%;font-size:15px;color:#023059;cursor:pointer}.nova-etapa[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.nova-etapa-link[_ngcontent-%COMP%]{font-family:Oswald,sans-serif;font-size:16px;color:#d9a25f;text-decoration:none;font-weight:400}.nova-etapa-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.botoes-container[_ngcontent-%COMP%]{max-width:300px;margin:30px auto 0;display:flex;justify-content:space-between}.btn-cancelar[_ngcontent-%COMP%]{padding:10px 20px;border:2px solid #025373;border-radius:8px;background-color:transparent;color:#025373;font-family:Noto Sans,sans-serif;font-weight:700;text-transform:uppercase;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 10px #0003}.btn-cancelar[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.btn-cadastrar[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:8px;background-color:#f2b705;color:#023059;font-family:Noto Sans,sans-serif;font-weight:700;text-transform:uppercase;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 10px #0003}.btn-cadastrar[_ngcontent-%COMP%]:hover{background-color:#e0a500}@media (max-width: 768px){.titulo-principal[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{max-width:90%;font-size:24px}.passo[_ngcontent-%COMP%]{margin:0 auto;max-width:90%}.botoes-container[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.btn-cancelar[_ngcontent-%COMP%], .btn-cadastrar[_ngcontent-%COMP%]{width:60%;margin:15px 0}}']})};var J=[{path:"",component:C}],F=class a{static \u0275fac=function(n){return new(n||a)};static \u0275mod=d({type:a});static \u0275inj=m({imports:[b.forChild(J),b]})};var V=class a{static \u0275fac=function(n){return new(n||a)};static \u0275mod=d({type:a});static \u0275inj=m({imports:[O,F,w,j,q,Z,K,T,L,w]})};export{V as CadastrarNovaObraModule};
