"use strict";(self.webpackChunkprojeto_concreta=self.webpackChunkprojeto_concreta||[]).push([[305],{3305:(N,d,t)=>{t.r(d),t.d(d,{CadastrarNovaObraModule:()=>k});var u=t(177),p=t(4925),r=t(4341),a=t(4438),m=t(122),f=t(105),g=t(1562);let b=(()=>{class o extends f.d{cadastrarEtapaEndpoint="EtapaModel/cadastrar";constructor(e){super(e)}cadastrarEtapa(e){return this.post(`${this.cadastrarEtapaEndpoint}`,e)}static \u0275fac=function(n){return new(n||o)(a.KVO(g.Qq))};static \u0275prov=a.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var h=t(5779),v=t(8166),C=t(708);const x=[{path:"",component:(()=>{class o{fb;obraService;etapasService;messageService;router;formGroup;etapasForm;idUsuario;mmensagem="";constructor(e,n,s,i,c){this.fb=e,this.obraService=n,this.etapasService=s,this.messageService=i,this.router=c}ngOnInit(){this.idUsuario=parseInt(localStorage.getItem("userId")||"0",10),console.log(this.idUsuario),this.configureForm()}configureForm(){this.formGroup=this.fb.group({nomeObra:[null,[r.k0.required]],construtora:[null,[r.k0.required]],localizacao:[null,[r.k0.required]],prazoConclusao:[null]}),this.etapasForm=this.fb.group({nomeEtapa:[null,[r.k0.required]],descricaoEtapa:[null,[r.k0.required]],prazoConclusaoEtapa:[null]})}save(){const e=new Date;console.log("interno save button "+this.idUsuario);const s={idObra:0,nome:this.formGroup.controls.nomeObra.value,descricao:"",localizacao:this.formGroup.controls.localizacao.value,dataInicio:e,dataFim:this.formGroup.controls.prazoConclusao.value,construtora:this.formGroup.controls.construtora.value,estaConcluido:!1,idGestor:this.idUsuario,idUsuario:this.idUsuario,idUf:0};console.log("Nova obra model "+s.idUsuario),this.obraService.cadastrarObra(s).subscribe({next:i=>{const c=i.obraDto?.idObra;if(!c)return void console.error("Erro: idObra n\xe3o encontrado na resposta.");console.log("response.idObra antes: "+c);const z={nomeEtapa:this.etapasForm.get("nomeEtapa")?.value,descricao:this.etapasForm.get("descricaoEtapa")?.value,dataConclusao:this.etapasForm.get("dataConclusaoEtapa")?.value,idEtapa:0,idObra:c};console.log("response.idObra depois: "+c),this.etapasService.cadastrarEtapa(z).subscribe({next:l=>{this.messageService.add({severity:"success",summary:"cadasto de etapa bem-sucedido",detail:"Etapa cadastrada com sucesso!"}),console.log("Etapa cadastrada com sucesso:",l),this.router.navigate(["/obra-andamento"])},error:l=>{console.error("Erro ao cadastrar etapa:",l)}}),this.messageService.add({severity:"success",summary:"cadasto de obra bem-sucedido",detail:"Obra cadastrada!"}),console.log("Obra cadastrada:",i)},error:i=>{console.error("Erro ao cadastrar obra:",i)}})}static \u0275fac=function(n){return new(n||o)(a.rXU(r.ok),a.rXU(m.N),a.rXU(b),a.rXU(h.bg),a.rXU(p.Ix))};static \u0275cmp=a.VBU({type:o,selectors:[["app-cadastrar-nova-obra"]],decls:65,vars:3,consts:[[3,"formGroup"],[1,"titulo-principal"],[1,"negrito"],[1,"passo","passo-1"],[1,"form-container"],[1,"campo"],["for","nome-obra"],["type","text","id","nome-obra","placeholder","Nome da obra","required","","formControlName","nomeObra"],["for","construtora"],["type","text","id","construtora","placeholder","Construtora","required","","formControlName","construtora"],["for","localizacao"],["type","text","id","localizacao","placeholder","Localiza\xe7\xe3o (Cidade - Estado)","required","","formControlName","localizacao"],[1,"campo","prazo-conclusao"],["for","prazo-conclusao"],["type","date","id","prazo-etapa","formControlName","prazoConclusao"],[1,"passo","passo-2"],["for","nome-etapa"],["type","text","id","nome-etapa","placeholder","Nome da etapa","required","","formControlName","nomeEtapa"],["for","descricao-etapa"],["id","descricao-etapa","placeholder","Escreva sua mensagem aqui...","required","","formControlName","descricaoEtapa"],["type","date","id","prazo-etapa","formControlName","prazoConclusaoEtapa"],[1,"nova-etapa"],["href","#",1,"nova-etapa-link"],[1,"botoes-container"],[1,"btn-cadastrar",3,"click"],[1,"btn-cancelar"]],template:function(n,s){1&n&&(a.nrm(0,"app-navbar"),a.j41(1,"div",0)(2,"header",1)(3,"h1"),a.EFF(4,"Siga o passo a passo para efetuar o "),a.j41(5,"span",2),a.EFF(6,"cadastro"),a.k0s(),a.EFF(7," da sua "),a.j41(8,"span",2),a.EFF(9,"obra com sucesso!"),a.k0s()()(),a.j41(10,"section",3)(11,"h2"),a.EFF(12,"1\xba Passo"),a.k0s(),a.nrm(13,"hr"),a.j41(14,"div",4)(15,"h3"),a.EFF(16,"Sobre a obra:"),a.k0s(),a.j41(17,"form",0)(18,"div",5)(19,"label",6),a.EFF(20,"Nome da obra"),a.k0s(),a.nrm(21,"input",7),a.k0s(),a.j41(22,"div",5)(23,"label",8),a.EFF(24,"Construtora"),a.k0s(),a.nrm(25,"input",9),a.k0s(),a.j41(26,"div",5)(27,"label",10),a.EFF(28,"Localiza\xe7\xe3o (Cidade - Estado)"),a.k0s(),a.nrm(29,"input",11),a.k0s(),a.j41(30,"div",12)(31,"label",13),a.EFF(32,"Prazo de conclus\xe3o"),a.k0s(),a.nrm(33,"input",14),a.k0s()()()(),a.j41(34,"section",15)(35,"h2"),a.EFF(36,"2\xba Passo"),a.k0s(),a.nrm(37,"hr"),a.j41(38,"div",4)(39,"h3"),a.EFF(40,"Etapas da obra:"),a.k0s(),a.j41(41,"h4"),a.EFF(42,"Etapa 1"),a.k0s(),a.j41(43,"form",0)(44,"div",5)(45,"label",16),a.EFF(46,"Nome da etapa"),a.k0s(),a.nrm(47,"input",17),a.k0s(),a.j41(48,"div",5)(49,"label",18),a.EFF(50,"Descri\xe7\xe3o da etapa"),a.k0s(),a.nrm(51,"textarea",19),a.k0s(),a.j41(52,"div",12)(53,"label",13),a.EFF(54,"Prazo de conclus\xe3o"),a.k0s(),a.nrm(55,"input",20),a.k0s()(),a.j41(56,"div",21)(57,"a",22),a.EFF(58,"+ Nova Etapa"),a.k0s()()(),a.j41(59,"div",23)(60,"button",24),a.bIt("click",function(){return s.save()}),a.EFF(61,"CADASTRAR"),a.k0s(),a.j41(62,"button",25),a.EFF(63,"CANCELAR"),a.k0s()()()(),a.nrm(64,"app-footer")),2&n&&(a.R7$(),a.Y8G("formGroup",s.formGroup),a.R7$(16),a.Y8G("formGroup",s.formGroup),a.R7$(26),a.Y8G("formGroup",s.etapasForm))},dependencies:[r.qT,r.me,r.BC,r.cb,r.YS,r.j4,r.JD,v._,C.n],styles:['@import"https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap";@import"https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap";@charset "UTF-8";.titulo-principal[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 auto;max-width:1200px;font-family:Oswald,sans-serif;font-size:36px;font-weight:400;color:#023059;padding:40px 0;text-align:center}.negrito[_ngcontent-%COMP%]{font-weight:700}.passo[_ngcontent-%COMP%]{padding-bottom:40px}h2[_ngcontent-%COMP%]{font-size:24px;color:#023059;text-align:center}h3[_ngcontent-%COMP%]{font-family:Oswald,sans-serif;font-size:20px;color:#fff;text-align:center;margin-bottom:20px}h4[_ngcontent-%COMP%]{font-size:20px;color:#f2b705;text-align:center}hr[_ngcontent-%COMP%]{border:1px solid #023059;max-width:600px;margin-top:0;margin-bottom:20px}.form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;background-color:#023059;padding:20px;border-radius:20px;box-shadow:0 4px 10px #0003}label[_ngcontent-%COMP%]{color:#d9a25f}.campo[_ngcontent-%COMP%]{margin-bottom:15px}input[type=text][_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:5px;border:1px solid white;background-color:#fff;color:#727272}input[type=text][_ngcontent-%COMP%]::placeholder, input[type=date][_ngcontent-%COMP%]::placeholder, textarea[_ngcontent-%COMP%]::placeholder{color:#727272}.prazo-conclusao[_ngcontent-%COMP%]{position:relative}.prazo-label[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;color:#727272;font-size:14px;transition:.2s;pointer-events:none}.hidden[_ngcontent-%COMP%]{opacity:0}.anexar-imagem[_ngcontent-%COMP%]{position:relative}.anexar-imagem[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.anexar-imagem[_ngcontent-%COMP%]   .clip-icon[_ngcontent-%COMP%]{position:absolute;right:15px;top:55%;font-size:15px;color:#023059;cursor:pointer}.nova-etapa[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.nova-etapa-link[_ngcontent-%COMP%]{font-family:Oswald,sans-serif;font-size:16px;color:#d9a25f;text-decoration:none;font-weight:400}.nova-etapa-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.botoes-container[_ngcontent-%COMP%]{max-width:300px;margin:30px auto 0;display:flex;justify-content:space-between}.btn-cancelar[_ngcontent-%COMP%]{padding:10px 20px;border:2px solid #025373;border-radius:8px;background-color:transparent;color:#025373;font-family:Noto Sans,sans-serif;font-weight:700;text-transform:uppercase;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 10px #0003}.btn-cancelar[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.btn-cadastrar[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:8px;background-color:#f2b705;color:#023059;font-family:Noto Sans,sans-serif;font-weight:700;text-transform:uppercase;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 10px #0003}.btn-cadastrar[_ngcontent-%COMP%]:hover{background-color:#e0a500}@media (max-width: 768px){.titulo-principal[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{max-width:90%;font-size:24px}.passo[_ngcontent-%COMP%]{margin:0 auto;max-width:90%}.botoes-container[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.btn-cancelar[_ngcontent-%COMP%], .btn-cadastrar[_ngcontent-%COMP%]{width:60%;margin:15px 0}}']})}return o})()}];let O=(()=>{class o{static \u0275fac=function(n){return new(n||o)};static \u0275mod=a.$C({type:o});static \u0275inj=a.G2t({imports:[p.iI.forChild(x),p.iI]})}return o})();var E=t(3673),F=t(3283),M=t(2796),P=t(2242),y=t(1593);let k=(()=>{class o{static \u0275fac=function(n){return new(n||o)};static \u0275mod=a.$C({type:o});static \u0275inj=a.G2t({imports:[u.MD,O,r.YN,r.X1,E.l,F.k,M.tm,P.u,y.f,r.YN]})}return o})()}}]);